<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE GVSupport SYSTEM "http://www.greenvulcano.com/gvesb/dtds/GVSupport.dtd">

<GVSupport version="1.0">
    <GVLog4JConfiguration name="LOG4J" type="module">
        <log4j:configuration debug="false" threshold="all"
                             xmlns:log4j="http://jakarta.apache.org/log4j/">
            <appender name="DB_LOGGER_FOR_GVVCL" class="it.greenvulcano.log.db.JDBCAppender">
                <param name="url" value="jdbc:hsqldb:hsql://localhost:9001/gvesb"/>
                <param name="dbclass" value="org.hsqldb.jdbcDriver" />
                <param name="username" value="gv_log" />
                <param name="password" value="gv_log" />
                <param name="table" value="log_vcl" />
                <param name="column" value="id_msg#SEQUENCE#log_seq.nextval" />
                <param name="column" value="tstamp#TIMESTAMP" />
                <param name="column" value="prio#PRIO" />
                <param name="column" value="iprio#IPRIO" />
                <param name="column" value="cat#CAT" />
                <param name="column" value="thread#THREAD" />
                <param name="column" value="server#MDC#SERVER" />
                <param name="column" value="id#MDC#ID" />
                <param name="column" value="system_n#MDC#SYSTEM" />
                <param name="column" value="service#MDC#SERVICE" />
                <param name="column" value="operation_n#MDC#OPERATION" />
                <param name="column" value="msg_size#MSG_SIZE" />
                <param name="column" value="msg#MSG" />
                <param name="column" value="throwable#THROWABLE" />
            </appender>
            <appender name="DB_LOGGER_FOR_GVCORE" class="it.greenvulcano.log.db.JDBCAppender">
                <param name="url" value="jdbc:hsqldb:hsql://localhost:9001/gvesb"/>
                <param name="dbclass" value="org.hsqldb.jdbcDriver" />
                <param name="username" value="gv_log" />
                <param name="password" value="gv_log" />
                <param name="table" value="log_core" />
                <param name="column" value="id_msg#SEQUENCE#log_seq.nextval" />
                <param name="column" value="tstamp#TIMESTAMP" />
                <param name="column" value="prio#PRIO" />
                <param name="column" value="iprio#IPRIO" />
                <param name="column" value="cat#CAT" />
                <param name="column" value="thread#THREAD" />
                <param name="column" value="server#MDC#SERVER" />
                <param name="column" value="id#MDC#ID" />
                <param name="column" value="system_n#MDC#SYSTEM" />
                <param name="column" value="service#MDC#SERVICE" />
                <param name="column" value="operation_n#MDC#OPERATION" />
                <param name="column" value="msg_size#MSG_SIZE" />
                <param name="column" value="msg#MSG" />
                <param name="column" value="throwable#THROWABLE" />
            </appender>
            <appender name="DB_LOGGER_FOR_GVADP" class="it.greenvulcano.log.db.JDBCAppender">
                <param name="url" value="jdbc:hsqldb:hsql://localhost:9001/gvesb"/>
                <param name="dbclass" value="org.hsqldb.jdbcDriver" />
                <param name="username" value="gv_log" />
                <param name="password" value="gv_log" />
                <param name="table" value="log_adp" />
                <param name="column" value="id_msg#SEQUENCE#log_seq.nextval" />
                <param name="column" value="tstamp#TIMESTAMP" />
                <param name="column" value="prio#PRIO" />
                <param name="column" value="iprio#IPRIO" />
                <param name="column" value="cat#CAT" />
                <param name="column" value="thread#THREAD" />
                <param name="column" value="server#MDC#SERVER" />
                <param name="column" value="id#MDC#ID" />
                <param name="column" value="system_n#MDC#SYSTEM" />
                <param name="column" value="service#MDC#SERVICE" />
                <param name="column" value="operation_n#MDC#OPERATION" />
                <param name="column" value="msg_size#MSG_SIZE" />
                <param name="column" value="msg#MSG" />
                <param name="column" value="throwable#THROWABLE" />
            </appender>
            <appender name="DB_LOGGER_FOR_GVDTE" class="it.greenvulcano.log.db.JDBCAppender">
                <param name="url" value="jdbc:hsqldb:hsql://localhost:9001/gvesb"/>
                <param name="dbclass" value="org.hsqldb.jdbcDriver" />
                <param name="username" value="gv_log" />
                <param name="password" value="gv_log" />
                <param name="table" value="log_dte" />
                <param name="column" value="id_msg#SEQUENCE#log_seq.nextval" />
                <param name="column" value="tstamp#TIMESTAMP" />
                <param name="column" value="prio#PRIO" />
                <param name="column" value="iprio#IPRIO" />
                <param name="column" value="cat#CAT" />
                <param name="column" value="thread#THREAD" />
                <param name="column" value="server#MDC#SERVER" />
                <param name="column" value="id#MDC#ID" />
                <param name="column" value="system_n#MDC#SYSTEM" />
                <param name="column" value="service#MDC#SERVICE" />
                <param name="column" value="operation_n#MDC#OPERATION" />
                <param name="column" value="msg_size#MSG_SIZE" />
                <param name="column" value="msg#MSG" />
                <param name="column" value="throwable#THROWABLE" />
            </appender>
            <logger additivity="false" name="it.greenvulcano.gvesb.virtual">
                <level value="DEBUG"/>
                <appender-ref ref="LOGGER_FOR_GVVCL"/>
                <appender-ref ref="DB_LOGGER_FOR_GVVCL"/>
            </logger>
            <logger additivity="false" name="it.greenvulcano.gvesb.core">
                <level value="DEBUG"/>
                <appender-ref ref="LOGGER_FOR_GVCORE"/>
                <appender-ref ref="DB_LOGGER_FOR_GVCORE"/>
            </logger>
            <logger additivity="false" name="it.greenvulcano.gvesb.internal">
                <level value="DEBUG"/>
                <appender-ref ref="LOGGER_FOR_GVCORE"/>
                <appender-ref ref="DB_LOGGER_FOR_GVCORE"/>
            </logger>
            <logger additivity="false" name="it.greenvulcano.gvesb.notification">
                <level value="DEBUG"/>
                <appender-ref ref="LOGGER_FOR_GVCORE"/>
                <appender-ref ref="DB_LOGGER_FOR_GVCORE"/>
            </logger>
            <logger additivity="false" name="it.greenvulcano.gvesb.j2ee.db">
                <level value="DEBUG"/>
                <appender-ref ref="LOGGER_FOR_GVVCL"/>
                <appender-ref ref="DB_LOGGER_FOR_GVVCL"/>
            </logger>
            <logger additivity="false" name="it.greenvulcano.gvesb.gvdte">
                <level value="INFO"/>
                <appender-ref ref="LOGGER_FOR_GVDTE"/>
                <appender-ref ref="DB_LOGGER_FOR_GVDTE"/>
            </logger>
            <logger additivity="false" name="it.greenvulcano.gvesb.datahandling">
                <level value="DEBUG"/>
                <appender-ref ref="LOGGER_FOR_GVDH"/>
                <appender-ref ref="DB_LOGGER_FOR_GVADP"/>
            </logger>
            <logger additivity="false" name="it.greenvulcano.gvesb.axis2">
                <level value="INFO"/>
                <appender-ref ref="LOGGER_FOR_WS"/>
                <appender-ref ref="DB_LOGGER_FOR_GVADP"/>
            </logger>
            <logger additivity="false" name="it.greenvulcano.gvesb.ws">
                <level value="INFO"/>
                <appender-ref ref="LOGGER_FOR_WS"/>
                <appender-ref ref="DB_LOGGER_FOR_GVADP"/>
            </logger>
            <logger additivity="false" name="it.greenvulcano.gvesb.virtual.ws">
                <level value="INFO"/>
                <appender-ref ref="LOGGER_FOR_WS"/>
                <appender-ref ref="DB_LOGGER_FOR_GVVCL"/>
            </logger>
            <logger additivity="false" name="it.greenvulcano">
                <level value="DEBUG"/>
                <appender-ref ref="LOGGER_FOR_GV"/>
                <appender-ref ref="DB_LOGGER_FOR_GVCORE"/>
            </logger>
            <logger additivity="false" name="it.greenvulcano.gvesb.gvdp">
                <level value="DEBUG"/>
                <appender-ref ref="LOGGER_FOR_DATA_PROVIDERS"/>
                <appender-ref ref="DB_LOGGER_FOR_GVCORE"/>
            </logger>
            <logger additivity="false" name="it.greenvulcano.gvesb.gvhl7">
                <level value="INFO"/>
                <appender-ref ref="LOGGER_FOR_GVHL7"/>
                <appender-ref ref="DB_LOGGER_FOR_GVADP"/>
            </logger>
        </log4j:configuration>
    </GVLog4JConfiguration>


    <GVWorkbenchConfig name="WORKBENCH" type="module">
        <LogConsole jdbc-connection-name="gv_log">
            <LogFilter>
                select  SOURCE, ID_MSG, to_char(TSTAMP, &apos;DD/MM/YYYY HH24:MI:SS.FF&apos;) as TSTAMP,
                        PRIO, IPRIO, CAT, THREAD, SERVER, ID, SYSTEM_N as "SYSTEM", SERVICE, OPERATION_N as "OPERATION", MSG_SIZE,
                case when MSG_SIZE &lt; 500
                    then MSG
                    else null
                end as MSG,
                case when length(THROWABLE) = 0
                    then 0
                    else 1
                end as THROWABLE_PRESENT
                from VW_GV_LOG
                where TSTAMP &gt;= to_timestamp(&apos;@{{DATE_FROM}}&apos;, &apos;DD/MM/YYYY HH24:MI&apos;)
                and TSTAMP &lt;= to_timestamp(&apos;@{{DATE_TO}}&apos;, &apos;DD/MM/YYYY HH24:MI&apos;) + 1 MINUTE
                decode{{@{{SYSTEM}}::NULL::::and SYSTEM_N = &apos;@{{SYSTEM}}&apos;}}
                decode{{@{{SERVICE}}::NULL::::and SERVICE like &apos;%@{{SERVICE}}%&apos;}}
                decode{{@{{OPERATION}}::NULL::::and OPERATION_N like &apos;%@{{OPERATION}}%&apos;}}
                decode{{@{{ID}}::NULL::::and ID = &apos;@{{ID}}&apos;}}
                decode{{@{{PRIO}}::NULL::::and PRIO in (decode{{@{{PRIO}}::DEBUG::&apos;DEBUG&apos;,&apos;INFO&apos;,&apos;WARNING&apos;,&apos;ERROR&apos;::INFO::&apos;INFO&apos;,&apos;WARNING&apos;,&apos;ERROR&apos;::WARNING::&apos;WARNING&apos;,&apos;ERROR&apos;::ERROR::&apos;ERROR&apos;::''}})}}
                order by decode{{@{{ORDER}}::DESC::TSTAMP desc::TSTAMP}}
            </LogFilter>
            <Message>select decode{{@{{MSG_FIELD}}::Msg::MSG::Exc::THROWABLE::NONE}} as MESSAGE from VW_GV_LOG where ID_MSG=@{{ID_MSG}}</Message>
        </LogConsole>
    </GVWorkbenchConfig>

</GVSupport>